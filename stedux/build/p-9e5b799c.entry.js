import{g as e,f as t,r,h as n,a as o,H as i}from"./p-415294ab.js";const a=e=>!("isConnected"in e)||e.isConnected,s=(()=>{let e;return(...t)=>{e&&clearTimeout(e),e=setTimeout((()=>{e=0,(e=>{for(let t of e.keys())e.set(t,e.get(t).filter(a))})(...t)}),2e3)}})();let l;const c=(e,t)=>{var r;return"to"in e?{path:e.path,to:e.to}:{path:e.path,id:e.id,jsx:null!==(r=e.render)&&void 0!==r?r:t}},u=(e,t=l)=>({href:e,onClick:r=>{r.metaKey||r.ctrlKey||2!=r.which&&1!=r.button&&(r.preventDefault(),t.push(e))}}),d=(e,t)=>{if("string"==typeof t){if(t===e)return{}}else if("function"==typeof t){const r=t(e);if(r)return!0===r?{}:{...r}}else{const r=t.exec(e);if(r)return t.lastIndex=0,{...r}}},p=e=>e.pathname.toLowerCase(),h=(()=>{const r=window,n=new URL(r.location.href),o=(void 0,p),{state:i,onChange:a,dispose:c}=((r,n)=>{const o=((e,t=((e,t)=>e!==t))=>{let r=new Map(Object.entries(null!=e?e:{}));const n={dispose:[],get:[],set:[],reset:[]},o=()=>{r=new Map(Object.entries(null!=e?e:{})),n.reset.forEach((e=>e()))},i=e=>(n.get.forEach((t=>t(e))),r.get(e)),a=(e,o)=>{const i=r.get(e);t(o,i,e)&&(r.set(e,o),n.set.forEach((t=>t(e,o,i))))},s="undefined"==typeof Proxy?{}:new Proxy(e,{get:(e,t)=>i(t),ownKeys:()=>Array.from(r.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(e,t)=>r.has(t),set:(e,t,r)=>(a(t,r),!0)}),l=(e,t)=>(n[e].push(t),()=>{((e,t)=>{const r=e.indexOf(t);r>=0&&(e[r]=e[e.length-1],e.length--)})(n[e],t)});return{state:s,get:i,set:a,on:l,onChange:(t,r)=>{const n=l("set",((e,n)=>{e===t&&r(n)})),o=l("reset",(()=>r(e[t])));return()=>{n(),o()}},use:(...e)=>{const t=e.reduce(((e,t)=>(t.set&&e.push(l("set",t.set)),t.get&&e.push(l("get",t.get)),t.reset&&e.push(l("reset",t.reset)),t.dispose&&e.push(l("dispose",t.dispose)),e)),[]);return()=>t.forEach((e=>e()))},dispose:()=>{n.dispose.forEach((e=>e())),o()},reset:o,forceUpdate:e=>{const t=r.get(e);n.set.forEach((r=>r(e,t,t)))}}})(r,n);return o.use((()=>{if("function"!=typeof e)return{};const r=new Map;return{dispose:()=>r.clear(),get:t=>{const n=e();n&&((e,t,r)=>{const n=e.get(t);n?n.includes(r)||n.push(r):e.set(t,[r])})(r,t,n)},set:e=>{const n=r.get(e);n&&r.set(e,n.filter(t)),s(r)},reset:()=>{r.forEach((e=>e.forEach(t))),s(r)}}})()),o})({url:n,activePath:o(n)},((e,t,r)=>"url"===r?e.href!==t.href:e!==t)),u=e=>{history.pushState(null,null,e);const t=new URL(e,document.baseURI);i.url=t,i.activePath=o(t)},h=e=>{const{activePath:t}=i;for(let r of e){const n=d(t,r.path);if(n){if(null!=r.to){const n="string"==typeof r.to?r.to:r.to(t);return u(n),h(e)}return{params:n,route:r}}}},g=()=>{const e=new URL(r.location.href);i.url=e,i.activePath=o(e)},m=l={Switch:(e,t)=>{const r=h(t);if(r)return"function"==typeof r.route.jsx?r.route.jsx(r.params):r.route.jsx},get url(){return i.url},get activePath(){return i.activePath},push:u,onChange:a,dispose:()=>{l=void 0,r.removeEventListener("popstate",g),c()}};return g(),r.addEventListener("popstate",g),m})(),g=()=>n("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",role:"img",class:"",width:"50",height:"50",viewBox:"0 0 27.23 27.23"},n("rect",{class:"fill-out",width:"27.23",height:"27.23",rx:"2"}),n("polygon",{class:"fill-in",points:"5.8 21.75 13.66 21.75 13.67 9.98 17.59 9.98 17.58 21.76 21.51 21.76 21.52 6.06 5.82 6.04 5.8 21.75"})),m=()=>n("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",role:"img",class:"",viewBox:"0 0 16 16",width:"50",height:"50"},n("path",{"fill-rule":"evenodd",class:"fill-out",d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})),f=class{constructor(e){r(this,e)}render(){const e=h.activePath;return n("div",{class:"root"},n("nav",null,n("h1",null,"Ste",n("span",{class:"highlight"},"dux")),n("span",{class:"app-links desktop"},n("a",Object.assign({},u("/stedux/counter",h),{class:{active:"/stedux/counter"===e}}),"Counter"),n("a",Object.assign({},u("/stedux/async",h),{class:{active:"/stedux/async"===e}}),"Async")),n("span",{class:"external-links"},n("a",{href:"https://github.com/randy-r/stedux",target:"_blank"},n(m,null)),n("a",{href:"https://www.npmjs.com/package/stedux",target:"_blank"},n(g,null)))),n("main",null,n(h.Switch,null,n(c,{path:"/stedux",to:"/stedux/counter"}),n(c,{path:"/stedux/counter"},n("stedux-counter",null)),n(c,{path:"/stedux/async"},n("stedux-async",null)),n(c,{path:"/*",to:"/stedux/counter"}))),n("div",{class:"version"},"1.0.2"))}};function b(e,t,r,n){const o=`original__${t}__${r}__is_overriden`;if(!0===e[o])return;const i=`original__${t}__${r}`;e[i]||"function"!=typeof e[t]||(e[i]=e[t].bind(e),e[i].bind(e));const a=e[i];if(a){const r=n(a).bind(e);e[t]=r}else{const r=n(null).bind(e);e[t]=r}e[o]=!0}function*v(){let e=0;for(;;)e+=1,yield e}f.style=":host{box-sizing:border-box;display:block;min-height:100%;height:auto !important;height:100%;--root-pad:1;padding:calc(var(--root-pad) * 1rem);--bg-clr:#03060b;--p1-clr:magenta;--p1-clr:#764abc;--p1-clr:hsl(263, 46%, 51%);--p1-clr:hsl(278, 100%, 66%);--color_red:255;--color_green:255;--color_blue:255;--p2-clr:rgba(var(--color_red), var(--color_green), var(--color_blue), 1);color:var(--p2-clr);--glow-text-shadow:0 0 30px rgba(var(--color_red), var(--color_green), var(--color_blue), 0.45), 0 0 60px rgba(var(--color_red), var(--color_green), var(--color_blue), 0.25);background-color:var(--bg-clr)}.root{max-width:1200px;margin:0 auto;display:flex;flex-direction:column;min-height:calc(100vh - 2 * var(--root-pad) * 1rem)}nav{padding:2px;display:flex;align-items:center;justify-content:center;flex-wrap:wrap}nav h1{display:inline-block;margin:0;text-shadow:var(--glow-text-shadow);margin-right:auto;font-size:1.5rem;margin:0 0.4em 0 0;transition:color 200ms ease-in-out}nav h1 .highlight{color:var(--p1-clr);transition:color 200ms ease-in-out}nav h1:hover{color:var(--p1-clr)}nav h1:hover .highlight{color:var(--p2-clr)}.app-links{color:var(--p1-clr);font-size:1.2rem;flex:1 0 100%;order:3;text-align:center}.external-links{color:var(--p1-clr);font-size:1.2rem;margin-left:auto}.external-links svg{display:inline-block;width:1.4em;height:1.4em}.external-links a .fill-out{fill:var(--p2-clr);transition:fill 200ms ease-in-out}.external-links a:hover .fill-out{fill:var(--p1-clr)}.app-links a{margin-top:1em}.external-links a:last-child{margin-right:0}a{display:inline-block;margin:0 0.4em;color:var(--p2-clr);transition:color 200ms ease-in-out;text-decoration:none}a.active{text-decoration:underline;text-decoration-color:var(--p1-clr);text-decoration-thickness:2px}a:hover{color:var(--p1-clr)}main{flex:1;display:flex;align-items:center;justify-content:center}.flex{display:flex;flex:1}@media screen and (min-width: 36em){.app-links{order:unset;flex-basis:auto}.app-links a{margin-top:0}}.version{font-size:0.5rem;color:(--p2-clr);opacity:0.75}";class x{constructor(e,t,r){this.list=[],this.set=new Set,this.structure=e,this.method=t,this.forceUpdate=r}add(e){"list"===this.structure?this.list.push(e):this.set.add(e)}values(){return"list"===this.structure?this.list:this.set.values()}clear(){"list"===this.structure?this.list=[]:this.set.clear()}signalToRender(){const e=this.values();"plain"===this.method?this.signalToRenderPlain(e):this.signalToRenderAsync(e),this.clear()}signalToRenderPlain(e){for(const t of e)this.forceUpdate(t)}signalToRenderAsync(e){const t=[...e];new Promise((()=>{this.signalToRenderPlain(t)}))}}function w(e,t,r){const{forceUpdate:n,getElement:o,getRenderingRef:i}=r;let a=[],s=Object.assign({},e);const l=t,c=()=>s,u=new x("set","async",n),d=v();return{createDispatch:function(e){e.onCleanups||(e.onCleanups=[]);const t=function(e){(e=>{const t=s,r=l(t,e);a=a.filter((e=>e.caller2.isConnected));for(const e of a)e.sel2(r,e.vars2)!==e.sel2(t,e.vars2)&&u.add(e.caller2);s=r,window.stash=s,u.signalToRender()})(e)};return b(e,"disconnectedCallback","createDispatch",(function(t){return function(){for(const t of e.onCleanups)null==t||t();null==t||t()}})),function(r){let n;const o={setOnCleanup:t=>{n=t,e.onCleanups.push(t)}};"AsyncFunction"===r[Symbol.toStringTag]?r(t,c,o).then((t=>(e.onCleanups=e.onCleanups.filter((e=>e!==n)),t))):"[object Function]"===Object.prototype.toString.call(r)?(r(t,c,o),e.onCleanups=e.onCleanups.filter((e=>e!==n))):t(r)}},createSelector:function(e,t){const r=o(t),n=t.constructor.name;if(t.ownsubs||(t.ownsubs=new Set),!r.componentId){const e=d.next().value;r.componentId=`${n}::${e}`}if(!t.idGenerator){const e=v();t.idGenerator=e}const l=t.idGenerator.next().value;function c(){return function(){const n=i();return!a.find((t=>t.sel2.stashId===e.stashId))&&n&&(a.push({sel2:e,caller2:r,vars2:void 0}),t.ownsubs.add(e.stashId)),e(s)}()}return e.stashId=`${r.componentId}::${l}`,b(t,"disconnectedCallback","createSelector",(function(e){return function(){a=a.filter((e=>!t.ownsubs.has(e.sel2.stashId))),delete t.ownsubs,null==e||e()}})),c.bind(t),c},createProvider:function(){t(e,{type:"__STASH_INIT__"})}}}const y={person:{loading:null,data:null,error:null}},k=(e,t)=>{switch(t.type){case"person-loading":return{data:null,error:null,loading:!0};case"person-error":return"The user aborted a request."===t.payload.error.message?y.person:{data:null,error:t.payload.error,loading:!1};case"person-done":return{data:t.payload,error:null,loading:!1};default:return e}},{createDispatch:_,createSelector:j}=w(y,((e,t)=>Object.assign(Object.assign({},e),{person:k(e.person,t)})),{forceUpdate:t,getElement:o,getRenderingRef:e}),z=class{constructor(e){r(this,e),this.personData=j((e=>e.person),this),this.dispatch=_(this)}render(){const{data:e,loading:t,error:r}=this.personData(),o=(11,1+Math.floor(10*Math.random()));const a=null===t?"-":t?"...":e.name,s=null===t?"-":t?"...":e.height;return n(i,null,n("ui-btn",{onClick:()=>this.dispatch((e=>async t=>{try{t({type:"person-loading"});const r=await fetch(`https://swapi.dev/api/people/${e}`);if(!r.ok)return void t({type:"person-error",payload:{error:{message:`Failed to fetch: ${r.status}.`}}});t({type:"person-done",payload:await r.json()})}catch(e){t({type:"person-error",payload:{error:{message:e.message}}})}})(o))},"Fetch data"),n("div",{class:"data"},n("div",{class:"row"},n("span",{class:"label"},"name:"),n("span",{class:"value"},a)),n("div",{class:"row"},n("span",{class:"label"},"height:"),n("span",{class:"value"},s))),r&&n("div",null,"Oops: ",r.message))}};z.style=":host{padding:5px;flex:1;--fs:2rem;font-size:var(--fs);min-height:calc(10 * var(--fs))}ui-btn{display:flex;justify-content:center}.data{margin-top:1em;display:block}.row{display:flex}.label{text-align:end;padding-right:0.5em;min-width:50%}.value{color:var(--p1-clr);text-shadow:var(--glow-text-shadow)}@media screen and (min-width: 36em){:host{font-size:3rem}}@media screen and (min-width: 60em){:host{min-height:auto}}";const{createDispatch:C,createSelector:O}=w({counter:0},((e,t)=>{const r=((e,t)=>{switch(t.type){case"decrement":return e-1;case"increment":return e+1;default:return e}})(e.counter,t);return Object.assign(Object.assign({},e),{counter:r})}),{forceUpdate:t,getElement:o,getRenderingRef:e}),R=class{constructor(e){r(this,e),this.dispatch=C(this),this.counter=O((e=>e.counter),this)}render(){return n("div",null,n("ui-btn",{onClick:()=>this.dispatch({type:"decrement"})},"-"),n("ui-jumbo",null,this.counter()),n("ui-btn",{onClick:()=>this.dispatch({type:"increment"})},"+"))}};R.style=":host{padding:5px;flex:1;font-size:3rem}div{padding:30px;display:flex;flex-direction:column;align-items:center;justify-content:center;max-width:70%;margin:0 auto}ui-jumbo{text-align:center;margin-top:1.5rem;margin-bottom:1.5rem}ui-btn button{min-width:2em;aspect-ratio:1/1}@media screen and (min-width: 36em){div{flex-direction:row}ui-jumbo{font-size:3.5rem}}";const S=class{constructor(e){r(this,e)}render(){return n("button",{onClick:this.onClick},n("slot",null))}};S.style="button{text-align:inherit;border:none;margin:0;padding:0;width:auto;overflow:visible;background:transparent;color:inherit;font:inherit;line-height:normal;-webkit-font-smoothing:inherit;-moz-osx-font-smoothing:inherit;-webkit-appearance:none}button::-moz-focus-inner{border:0;padding:0}button{padding:0.25em 0.5em;text-align:center;position:relative;border:3px solid;box-sizing:border-box;border-block-start:3px solid;border-image-source:radial-gradient(circle at top left, var(--p1-clr), transparent calc(max(40%, 1em)));border-image-slice:1;transition:background-color 100ms ease-in-out, color 300ms ease-in-out, border-image-source 600ms ease-in-out}button::before{box-sizing:border-box;content:'';background-color:transparent;display:block;position:relative;position:absolute;top:-3px;right:-3px;left:-3px;bottom:-3px;border:3px solid;border-block-start:3px solid;border-image-source:radial-gradient(circle at bottom right, var(--p2-clr), transparent calc(max(40%, 1em)));border-image-slice:1;transition:border-image-source 600ms ease-in-out}button:hover{border-image-source:radial-gradient(circle at top left, var(--p1-clr), transparent calc(max(100%, 1em)))}button:hover::before{border-image-source:radial-gradient(circle at bottom right, var(--p2-clr), transparent calc(min(20%, 1em)))}button:focus-visible{background-color:rgba(255, 255, 255, 0.1)}button:active{outline:none;background-color:rgba(255, 255, 255, 0.1)}";const $=class{constructor(e){r(this,e)}render(){return n("span",null,n("slot",null))}};$.style="span{display:inline-block;min-width:3ch;text-align:center;color:rgba(var(--color_red), var(--color_green), var(--color_blue), 1);text-shadow:var(--glow-text-shadow);font-size:4em}";export{f as app_root,z as stedux_async,R as stedux_counter,S as ui_btn,$ as ui_jumbo}