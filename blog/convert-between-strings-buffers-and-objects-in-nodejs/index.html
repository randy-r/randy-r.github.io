<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="Learn what are the methods of converting Strings, Buffer, Objects into and from each other."><meta property="og:type" content="article"><meta property="og:title" content="Convert between Strings, Buffers and Objects in Node.js"><meta property="og:url" content="https://www.codelime.blog/convert-between-strings-buffers-and-objects-in-nodejs/index.html"><meta property="og:site_name" content="Code Lime"><meta property="og:description" content="Learn what are the methods of converting Strings, Buffer, Objects into and from each other."><meta property="og:locale" content="en"><meta property="og:image" content="https://www.codelime.blog/images/thumbnails/convert-between-strings-buffers-and-objects-in-nodejs.jpg"><meta property="og:updated_time" content="2019-10-20T10:46:19.858Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Convert between Strings, Buffers and Objects in Node.js"><meta name="twitter:description" content="Learn what are the methods of converting Strings, Buffer, Objects into and from each other."><meta name="twitter:image" content="https://www.codelime.blog/images/thumbnails/convert-between-strings-buffers-and-objects-in-nodejs.jpg"><link rel="shortcut icon" href="../images/favicon.ico"><link rel="icon" type="image/png" href="../images/favicon-192x192.png" sizes="192x192"><link rel="apple-touch-icon" sizes="180x180" href="../images/apple-touch-icon.png"><title>Convert between Strings, Buffers and Objects in Node.js</title><link rel="stylesheet" href="../css/style.css"><link rel="stylesheet" href="../css/rtl.css"></head><body class="max-width mx-auto px3 ltr"><div class="content index py4"><header id="header"><a href="../index.html"><div id="logo" style="background-image:url(../images/logo.png)"></div><div id="title"><h1>Code Lime</h1></div></a><div id="nav"><ul><li class="icon"><a href="index.html#"><i class="fas fa-bars fa-2x"></i></a></li><li><a href="../index.html">Home</a></li><li><a href="../about/index.html">About</a></li><li><a href="../posts.html">Writing</a></li><li class="icon"></li> </ul></div></header><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">Convert between Strings, Buffers and Objects in Node.js</h1><div class="meta"><span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Code Lime</span></span><div class="postdate"><time datetime="2019-10-19T21:00:01.000Z" itemprop="datePublished">2019-10-20</time></div></div></header><div class="content" itemprop="articleBody"><p>Much of what you’ll read here is available on the official docs and with a bit of time you could’ve collected the information yourself. But since I’ve already did that part and want to have a plain “summary” of it, I’d say a good blog post about it won’t hurt. If you already know what’s described here, perhaps this will serve as a quick reference/cheatsheet.</p><h1 id="Preliminary-notes"><a href="index.html#Preliminary-notes" class="headerlink" title="Preliminary notes"></a>Preliminary notes</h1><p>When speaking about converting strings to objects and vice versa, the string must hold data in a well defined format. <a href="https://json.org/" target="_blank" rel="noopener">JSON</a> is a format that has native language support in both browser and Node (it means Javascript Object Notation, after all) therefore I’ll go with it for this post. For the sake of a zoomed out perspective, I’ll insert equivalent snippets for the <a href="https://yaml.org/" target="_blank" rel="noopener">YAML</a> format (npm <a href="https://www.npmjs.com/package/yaml" target="_blank" rel="noopener">link</a>).</p><p>When talking about objects, I mean the plain old JavaScript <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Object_initializer" target="_blank" rel="noopener">object</a>, having string keys and values of any depth of objects, strings, arrays, numbers, boolean. This means we are excluding other types such as Date, Map or Set.</p><p><a href="https://nodejs.org/api/buffer.html" target="_blank" rel="noopener">Buffers</a> are sequences of values representing bytes therefore converting strings strictly into/from buffers can be done using arbitrary values. I’m explicitly specifying the already default <code>utf-8</code> encoding to hint that it can be changed.</p><p>Converting Javascript objects to Buffers and the reverse operation will have you do an intermediary string conversion ,usually. However you can use binary serialization formats, therefore I’ve included a <a href="http://bsonspec.org/" target="_blank" rel="noopener">BSON</a> example (npm <a href="https://www.npmjs.com/package/bson" target="_blank" rel="noopener">link</a>).</p><h1 id="Quick-links-to-jump-to"><a href="index.html#Quick-links-to-jump-to" class="headerlink" title="Quick links to jump to:"></a>Quick links to jump to:</h1><ul><li><a href="index.html#Convert-json-String-to-Object">json string to object</a></li><li><a href="index.html#Convert-Object-to-json-String">object to json string</a></li><li><a href="index.html#Convert-YAML-String-to-Object">yaml string to buffer</a></li><li><a href="index.html#Convert-Object-to-YAML-string">buffer to yaml string</a></li><li><a href="index.html#Convert-String-to-Buffer">string to buffer</a></li><li><a href="index.html#Convert-Buffer-to-String">buffer to string</a></li><li><a href="index.html#Convert-Object-to-Buffer">object to buffer</a></li><li><a href="index.html#Convert-Buffer-to-Object">buffer to object</a></li><li><a href="index.html#Convert-Object-to-Buffer-directly">object to buffer directly</a></li><li><a href="index.html#Covert-Buffer-to-Object-directly">buffer to object directly</a></li></ul><h2 id="Convert-JSON-String-to-Object"><a href="index.html#Convert-JSON-String-to-Object" class="headerlink" title="Convert JSON String to Object"></a>Convert JSON String to Object</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="string">`&#123; "id":1, "name": "Jean" &#125;`</span></span><br><span class="line"><span class="keyword">let</span> o = <span class="built_in">JSON</span>.parse(s);</span><br></pre></td></tr></table></figure><h2 id="Convert-Object-to-JSON-String"><a href="index.html#Convert-Object-to-JSON-String" class="headerlink" title="Convert Object to JSON String"></a>Convert Object to JSON String</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> o = &#123;</span><br><span class="line">  id: <span class="number">1</span>,</span><br><span class="line">  name: <span class="string">"Jean"</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> s = <span class="built_in">JSON</span>.stringify(o);</span><br></pre></td></tr></table></figure><h2 id="Convert-YAML-String-to-Object"><a href="index.html#Convert-YAML-String-to-Object" class="headerlink" title="Convert YAML String to Object"></a>Convert YAML String to Object</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> YAML = <span class="built_in">require</span>(<span class="string">'yaml'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> y = <span class="string">`</span></span><br><span class="line"><span class="string">      id: 1</span></span><br><span class="line"><span class="string">      name: Jean</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"><span class="keyword">let</span> o = YAML.parse(y);</span><br></pre></td></tr></table></figure><h2 id="Convert-Object-to-YAML-string"><a href="index.html#Convert-Object-to-YAML-string" class="headerlink" title="Convert Object to YAML string"></a>Convert Object to YAML string</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> YAML = <span class="built_in">require</span>(<span class="string">'yaml'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> o = &#123;</span><br><span class="line">  id: <span class="number">1</span>,</span><br><span class="line">  name: <span class="string">"Jean"</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> s = YAML.stringify(o);</span><br></pre></td></tr></table></figure><h2 id="Convert-String-to-Buffer"><a href="index.html#Convert-String-to-Buffer" class="headerlink" title="Convert String to Buffer"></a>Convert String to Buffer</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="string">'arbitrary'</span>;</span><br><span class="line"><span class="keyword">let</span> b = Buffer.from(s, <span class="string">'utf-8'</span>);</span><br></pre></td></tr></table></figure><h2 id="Convert-Buffer-to-String"><a href="index.html#Convert-Buffer-to-String" class="headerlink" title="Convert Buffer to String"></a>Convert Buffer to String</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> b = Buffer.from([<span class="number">0x61</span>, <span class="number">0x72</span>, <span class="number">0x62</span>, <span class="number">0x69</span>, <span class="number">0x74</span>, <span class="number">0x72</span>, <span class="number">0x61</span>, <span class="number">0x72</span>, <span class="number">0x79</span>]);</span><br><span class="line"><span class="keyword">let</span> s = b.toString(<span class="string">'utf-8'</span>);</span><br><span class="line"><span class="comment">// "arbitrary"</span></span><br></pre></td></tr></table></figure><h2 id="Convert-Object-to-Buffer"><a href="index.html#Convert-Object-to-Buffer" class="headerlink" title="Convert Object to Buffer"></a>Convert Object to Buffer</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> o = &#123; <span class="attr">id</span>: <span class="number">1</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> s = <span class="built_in">JSON</span>.stringify(o);</span><br><span class="line"><span class="keyword">let</span> b = Buffer.from(s, <span class="string">'utf-8'</span>);</span><br></pre></td></tr></table></figure><h2 id="Convert-Buffer-to-Object"><a href="index.html#Convert-Buffer-to-Object" class="headerlink" title="Convert Buffer to Object"></a>Convert Buffer to Object</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> b = Buffer.from([<span class="number">0x7b</span>, <span class="number">0x22</span>, <span class="number">0x69</span>, <span class="number">0x64</span>, <span class="number">0x22</span>, <span class="number">0x3a</span>, <span class="number">0x31</span>, <span class="number">0x7d</span>]);</span><br><span class="line"><span class="keyword">let</span> s = b.toString(<span class="string">'utf-8'</span>);</span><br><span class="line"><span class="keyword">let</span> o = <span class="built_in">JSON</span>.parse(s); <span class="comment">// passing the buffer directly will have it converted to string</span></span><br><span class="line"><span class="comment">// &#123;id: 1 &#125;</span></span><br></pre></td></tr></table></figure><h2 id="Convert-Object-to-Buffer-directly"><a href="index.html#Convert-Object-to-Buffer-directly" class="headerlink" title="Convert Object to Buffer directly"></a>Convert Object to Buffer directly</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> BSON = <span class="built_in">require</span>(<span class="string">'bson'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> o = &#123; <span class="attr">id</span>: <span class="number">1</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> b = BSON.serialize(o);</span><br></pre></td></tr></table></figure><h2 id="Covert-Buffer-to-Object-directly"><a href="index.html#Covert-Buffer-to-Object-directly" class="headerlink" title="Covert Buffer to Object directly"></a>Covert Buffer to Object directly</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> BSON = <span class="built_in">require</span>(<span class="string">'bson'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> b = Buffer.from([<span class="number">0x0d</span>, <span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x10</span>, <span class="number">0x69</span>, <span class="number">0x64</span>, <span class="number">0x00</span>, <span class="number">0x01</span>, <span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x00</span>]);</span><br><span class="line"><span class="keyword">let</span> o = BSON.deserialize(b);</span><br><span class="line"><span class="comment">// &#123; id: 1 &#125;</span></span><br></pre></td></tr></table></figure><h1 id="Closing-Notes"><a href="index.html#Closing-Notes" class="headerlink" title="Closing Notes"></a>Closing Notes</h1><p>The above attempts to be a simple gist for such transformations in Node.js. I hope it saves you some time.</p><p>Stay tuned (I know, tall order) because I’m thinking of writing about how/when/why/if <a href="https://nodejs.org/api/stream.html" target="_blank" rel="noopener">streams</a> come into play.</p><div style="height:20px;vertical-align:middle;line-height:20px;font-size:11px;color:#666;margin:6px 0 0 0">Thumbnail image copyright © 1968 Karel Thole.</div><div class="pagination"><a class="pag-anchor" href="../react-context-vs-global-values/index.html"><i class="fas fa-angle-left pag-anchor">&lt older</i></a> <a class="pag-anchor" href="../examples-from-the-long-road-of-over-engineering/index.html"><i class="fas fa-angle-right pag-anchor">newer &gt</i></a></div></div></article><footer id="footer"><div class="footer-left">Copyright &copy; 2022 Randy Miller</div><div class="footer-right"><nav><ul><li><a href="../index.html">Home</a></li><li><a href="../about/index.html">About</a></li><li><a href="../posts.html">Writing</a></li><li><a href="https://twitter.com/randy_mllr">Twitter</a></li></ul></nav></div></footer></div><script>!function(t,e,a,c,n,o){e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},n=t.createElement("script"),o=t.getElementsByTagName("script")[0],n.async=1,n.src="//cdn.usefathom.com/tracker.js",n.id="fathom-script",o.parentNode.insertBefore(n,o)}(document,window,0,"fathom"),fathom("set","siteId","YFKINOVA"),fathom("trackPageview")</script></body></html>