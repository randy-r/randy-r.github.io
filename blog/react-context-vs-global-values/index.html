<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="Why would you ever bother with React&apos;s context when you have global variables. Here&apos;s the reason."><meta property="og:type" content="article"><meta property="og:title" content="React Context vs global values"><meta property="og:url" content="https://www.codelime.blog/react-context-vs-global-values/index.html"><meta property="og:site_name" content="Code Lime"><meta property="og:description" content="Why would you ever bother with React&apos;s context when you have global variables. Here&apos;s the reason."><meta property="og:locale" content="en"><meta property="og:image" content="https://www.codelime.blog/images/logo.png"><meta property="og:updated_time" content="2019-09-28T08:45:00.417Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="React Context vs global values"><meta name="twitter:description" content="Why would you ever bother with React&apos;s context when you have global variables. Here&apos;s the reason."><meta name="twitter:image" content="https://www.codelime.blog/images/logo.png"><link rel="shortcut icon" href="../images/favicon.ico"><link rel="icon" type="image/png" href="../images/favicon-192x192.png" sizes="192x192"><link rel="apple-touch-icon" sizes="180x180" href="../images/apple-touch-icon.png"><title>React Context vs global values</title><link rel="stylesheet" href="../css/style.css"><link rel="stylesheet" href="../css/rtl.css"></head><body class="max-width mx-auto px3 ltr"><div class="content index py4"><header id="header"><a href="../index.html"><div id="logo" style="background-image:url(../images/logo.png)"></div><div id="title"><h1>Code Lime</h1></div></a><div id="nav"><ul><li class="icon"><a href="index.html#"><i class="fas fa-bars fa-2x"></i></a></li><li><a href="../index.html">Home</a></li><li><a href="../about/index.html">About</a></li><li><a href="../posts.html">Writing</a></li><li class="icon"></li> </ul></div></header><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">React Context vs global values</h1><div class="meta"><span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Code Lime</span></span><div class="postdate"><time datetime="2019-09-27T21:00:01.000Z" itemprop="datePublished">2019-09-28</time></div></div></header><div class="content" itemprop="articleBody"><p>One topic I can say I commonly hear when discussing with fellow devs is the justification of using <a href="https://reactjs.org/docs/context.html" target="_blank" rel="noopener">React’s Context</a> for “holding” a value when you can:</p><ul><li>export it from a <code>module</code></li><li>attached a <em>global</em> value on the <code>window</code> object</li><li>define it as and environment variable and let your bundler get it from <code>process.env</code>.</li></ul><p>These are all simple and clean (as in obvious) ways to keep <strong>global</strong> and <strong>constant</strong> values. By “global” I mean entire-application-global. Same for the “constant” notion, although, you could trigger an explicit re-rendering on the app when a setter function is called.</p><p>Bellow I will give an example of these two conditions slightly diverging and that’s when Context shows it’s usefulness. We are omitting props drilling, of course, assuming you’d like to avoid that, since you arrived at deciding between Context or globals.</p><p>Take the case of a range of colors for some elements. Let’s say a pallet of colors for a website featuring interior design.</p><h1 id="Values-exported-from-a-module"><a href="index.html#Values-exported-from-a-module" class="headerlink" title="Values exported from a module"></a>Values exported from a module</h1><p>For comparison I will tackle only this case of defining global value. Let us create a file where you’ll write the following.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// colors.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> colors = [<span class="string">"#4B6F80"</span>, <span class="string">"#E3F6FF"</span>, <span class="string">"#96DEFF"</span>, <span class="string">"#08608A"</span>, <span class="string">"#78B2CC"</span>];</span><br></pre></td></tr></table></figure><p>Then import it in a component:</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ColoredBlocks.js</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; colors &#125; <span class="keyword">from</span> <span class="string">"./colors"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">ColoredBlocks</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> colors.map(<span class="function"><span class="params">c</span> =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">background:</span> <span class="attr">c</span> &#125;&#125; /&gt;</span>);</span></span><br><span class="line"><span class="xml">&#125;</span></span><br></pre></td></tr></table></figure><p>Finally, display your pallet.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// App.js</span></span><br><span class="line"><span class="keyword">import</span> ColoredBlocks <span class="keyword">from</span> <span class="string">"./ColoredBlocks"</span>;</span><br><span class="line"><span class="comment">// other imports ...</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">"App"</span>&gt;</span><br><span class="line">      &lt;ColoredBlocks /&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ render root ...</span></span><br></pre></td></tr></table></figure><p>And the visual output would be:</p><div><div style="background:#4b6f80;width:100px;height:100px;display:inline-block"></div><div style="background:#e3f6ff;width:100px;height:100px;display:inline-block"></div><div style="background:#96deff;width:100px;height:100px;display:inline-block"></div><div style="background:#08608a;width:100px;height:100px;display:inline-block"></div><div style="background:#78b2cc;width:100px;height:100px;display:inline-block"></div><div><p>Everything works and looks nice. This is fine when the component tied to the colors is itself a singular element in the app.</p><p>Yet, once you need to render, the <code>ColoredBlocks</code> component cannot be reused with other values (remember, prop passing is assumed not to be an option).</p><h1 id="Values-provided-by-Context"><a href="index.html#Values-provided-by-Context" class="headerlink" title="Values provided by Context"></a>Values provided by Context</h1><p>Many apps have context providers as a single, close to root wrapper around all the app. Be it <a href="https://reacttraining.com/react-router/" target="_blank" rel="noopener">React Router</a>, <a href="https://react-redux.js.org/" target="_blank" rel="noopener">Redux</a>, <a href="https://www.apollographql.com/docs/react/get-started/" target="_blank" rel="noopener">Appolo Graphql</a>, it’s likely you’ll see just one of the providers and lots of consumers arbitrarily spread throughout the code.</p><p>However, when actively reading the Context <a href="https://reactjs.org/docs/context.html" target="_blank" rel="noopener">documentation</a> you’ll see the first subtitle “Context provides a way to pass data through the component <strong>tree</strong>“. A few paragraphs down the page it writes “it will read the current context value from the closest matching <code>Provider</code> above it in the <strong>tree</strong>“.</p><p>We know from a the datastructures 101 course that any subtree is a tree itself. React components are no different. That means we could have providers for several branches.</p><p>Let’s redefine the <code>ColoredBlocks</code> component. I’ve defined the context in the same file, but you could easily have it elsewhere.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ColoredBlocks.js</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> ColorsContext = React.createContext([<span class="string">"black"</span>]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">ColoredBlocks</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;ColorsContext.Consumer&gt;</span><br><span class="line">      &#123;colors =&gt; colors.map(<span class="function"><span class="params">c</span> =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">background:</span> <span class="attr">c</span> &#125;&#125; /&gt;</span>)&#125;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">ColorsContext.Consumer</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>An leveraging it would like:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// App.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; ColoredBlocks, ColorsContext &#125; <span class="keyword">from</span> <span class="string">"./ColoredBlocks"</span>;</span><br><span class="line"><span class="comment">// other imports ...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> coldColors = [<span class="string">"#4B6F80"</span>, <span class="string">"#E3F6FF"</span>, <span class="string">"#96DEFF"</span>, <span class="string">"#08608A"</span>, <span class="string">"#78B2CC"</span>];</span><br><span class="line"><span class="keyword">const</span> warmColors = [<span class="string">"#801D13"</span>, <span class="string">"#FAD6CF"</span>, <span class="string">"#E0553D"</span>, <span class="string">"#804039"</span>, <span class="string">"#CC301F"</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">"App"</span>&gt;</span><br><span class="line">      &lt;ColorsContext.Provider value=&#123;coldColors&#125;&gt;</span><br><span class="line">        &#123;<span class="comment">/* ColoredBlocks can be nested however deep  */</span>&#125;</span><br><span class="line">        &lt;ColoredBlocks /&gt;</span><br><span class="line">      &lt;<span class="regexp">/ColorsContext.Provider&gt;</span></span><br><span class="line"><span class="regexp">      &lt;br /</span>&gt;</span><br><span class="line">      &lt;ColorsContext.Provider value=&#123;warmColors&#125;&gt;</span><br><span class="line">        &lt;ColoredBlocks /&gt;</span><br><span class="line">      &lt;<span class="regexp">/ColorsContext.Provider&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// render root ...</span></span><br></pre></td></tr></table></figure><p>This produces the desired visual output:</p><div style="background:#4b6f80;width:100px;height:100px;display:inline-block"></div><div style="background:#e3f6ff;width:100px;height:100px;display:inline-block"></div><div style="background:#96deff;width:100px;height:100px;display:inline-block"></div><div style="background:#08608a;width:100px;height:100px;display:inline-block"></div><div style="background:#78b2cc;width:100px;height:100px;display:inline-block"></div><br><div style="background:#801d13;width:100px;height:100px;display:inline-block"></div><div style="background:#fad6cf;width:100px;height:100px;display:inline-block"></div><div style="background:#ff3c26;width:100px;height:100px;display:inline-block"></div><div style="background:#804039;width:100px;height:100px;display:inline-block"></div><div style="background:#cc301f;width:100px;height:100px;display:inline-block"></div><p>It’s true, one would probably define the color values in a different module or config file, but it’ll only be passed to the <code>ColorsProvider</code> and it won’t “litter” your application code.</p><h1 id="Conclusion"><a href="index.html#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h1><p>That’s <strong>one</strong> of the advantages the <a href="https://reactjs.org/docs/context.html" target="_blank" rel="noopener">Context API</a> offers over global values. It’s the ability to work with the component tree. Any tree, therefore code (components) can be shared and reused, inside the same app and cross projects. It bring flexibility whilst sticking to a standard. This is part of React’s philosophy, to work with your hierarchy as much as possible. Actually, the mindset is a good practice for software development in general, and is loosely known as the <a href="https://en.wikipedia.org/wiki/Dependency_injection" target="_blank" rel="noopener">Dependency Injection</a> principle.</p></div></div><div class="pagination"><a class="pag-anchor" href="../save-money-by-caching-paid-apis-with-cloudfront/index.html"><i class="fas fa-angle-left pag-anchor">&lt older</i></a> <a class="pag-anchor" href="../convert-between-strings-buffers-and-objects-in-nodejs/index.html"><i class="fas fa-angle-right pag-anchor">newer &gt</i></a></div></div></article><footer id="footer"><div class="footer-left">Copyright &copy; 2022 Randy Miller</div><div class="footer-right"><nav><ul><li><a href="../index.html">Home</a></li><li><a href="../about/index.html">About</a></li><li><a href="../posts.html">Writing</a></li><li><a href="https://twitter.com/randy_mllr">Twitter</a></li></ul></nav></div></footer></div><script>!function(t,e,a,c,n,o){e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},n=t.createElement("script"),o=t.getElementsByTagName("script")[0],n.async=1,n.src="//cdn.usefathom.com/tracker.js",n.id="fathom-script",o.parentNode.insertBefore(n,o)}(document,window,0,"fathom"),fathom("set","siteId","YFKINOVA"),fathom("trackPageview")</script></body></html>