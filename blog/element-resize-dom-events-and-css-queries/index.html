<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="See how you can check and react when any HTML element changed its dimensions."><meta property="og:type" content="article"><meta property="og:title" content="Element resize: DOM events and CSS queries"><meta property="og:url" content="https://www.codelime.blog/element-resize-dom-events-and-css-queries/index.html"><meta property="og:site_name" content="Code Lime"><meta property="og:description" content="See how you can check and react when any HTML element changed its dimensions."><meta property="og:locale" content="en"><meta property="og:image" content="https://www.codelime.blog/images/thumbnails/element-resize-dom-events-and-css-queries.jpg"><meta property="og:updated_time" content="2020-06-13T09:25:50.755Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Element resize: DOM events and CSS queries"><meta name="twitter:description" content="See how you can check and react when any HTML element changed its dimensions."><meta name="twitter:image" content="https://www.codelime.blog/images/thumbnails/element-resize-dom-events-and-css-queries.jpg"><link rel="shortcut icon" href="../images/favicon.ico"><link rel="icon" type="image/png" href="../images/favicon-192x192.png" sizes="192x192"><link rel="apple-touch-icon" sizes="180x180" href="../images/apple-touch-icon.png"><title>Element resize: DOM events and CSS queries</title><link rel="stylesheet" href="../css/style.css"><link rel="stylesheet" href="../css/rtl.css"></head><body class="max-width mx-auto px3 ltr"><div class="content index py4"><header id="header"><a href="../index.html"><div id="logo" style="background-image:url(../images/logo.png)"></div><div id="title"><h1>Code Lime</h1></div></a><div id="nav"><ul><li class="icon"><a href="index.html#"><i class="fas fa-bars fa-2x"></i></a></li><li><a href="../index.html">Home</a></li><li><a href="../about/index.html">About</a></li><li><a href="../posts.html">Writing</a></li><li class="icon"></li> </ul></div></header><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">Element resize: DOM events and CSS queries</h1><div class="meta"><span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Code Lime</span></span><div class="postdate"><time datetime="2020-01-17T22:00:01.000Z" itemprop="datePublished">2020-01-18</time></div></div></header><div class="content" itemprop="articleBody"><p>At the time of writing, acting upon a change in a HTML element size is still problematic.<br>In javascript the official support is limited, whilst in CSS there seems to be none. However, all is not lost as some passionate people<br>have come up with some crafty solutions.</p><p>Withing CSS element queries implementations, same as with <code>@media</code> queries you define discreet breakpoints where you apply new rule, as opposed to a continuous event firing in the Javascript approaches. It is often the case that many that events from Javascript power the behavior of the definitions found in the style sheet.</p><p>In the resources referenced here, there’s a chance you’ll come across both <em>element queries</em> and <em>container queries</em> terminology. The difference is that the former has the breakpoints and behavior associated to the <em>same</em> element whilst the latter has breakpoints on an element but the behavior for one or more of its children.</p><p>To easily showcase the example I’m using a plain <code>textarea</code> element, that’s resizable with the click drag by default.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">textarea</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br></pre></td></tr></table></figure><p>The examples of this article have the <code>width</code> property mutation as the trigger, but you many of the solutions can let you hook to more changing values, height included. Before using any of these in production I advise you to explore their documentation.</p><p>I’m importing the libraries via the <code>script</code> tag but that does not mean you cannot toss them in using your preferred bundler.<br>I’m using query selectors to access the element.<br>Depending on your frontend library/framework of choice, you might have to use the corresponding way to get the element and check its existence.</p><h1 id="Interval-loop"><a href="index.html#Interval-loop" class="headerlink" title="Interval loop"></a>Interval loop</h1><p>You’ve probably though of this already. If there’s no solution out there, a <code>setInterval</code> call should do it.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> intervalId = setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> el = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'textarea'</span>)[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">if</span> (el) &#123;</span><br><span class="line">    <span class="keyword">let</span> width = el.clientWidth;</span><br><span class="line">    el.style.background = <span class="string">`rgb(<span class="subst">$&#123;width % <span class="number">255</span>&#125;</span>, 40, 190)`</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    clearInterval(intervalId);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, <span class="number">250</span>);</span><br></pre></td></tr></table></figure><p>Simple for a simple case. If you dealing with a more complex scenario, you’d need to think about scalability, efficiency and the intriguing corner cases.</p><h1 id="ResizeObserver"><a href="index.html#ResizeObserver" class="headerlink" title="ResizeObserver"></a>ResizeObserver</h1><p>The <a href="https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserver" target="_blank" rel="noopener">ResizeObserver</a> is an API supported by modern versions of browsers, exceptions being Internet Explorer, Firefox Android. If you need to target these or older versions of various browsers, don’t feel down just yet, polyfills are coming to the rescue. I would check <a href="https://github.com/que-etc/resize-observer-polyfill" target="_blank" rel="noopener">ResizeObserver Polyfill</a> or <a href="https://github.com/juggle/resize-observer" target="_blank" rel="noopener">Resize Observer</a> out. Happily enough, neither of them use a polling loop.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> el = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'textarea'</span>)[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">const</span> observer = <span class="keyword">new</span> ResizeObserver(<span class="function"><span class="params">entries</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> entry = entries[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">let</span> width = entry.contentRect.width;</span><br><span class="line">  el.style.background = <span class="string">`rgb(<span class="subst">$&#123;width % <span class="number">255</span>&#125;</span>, 40, 190)`</span>;</span><br><span class="line">&#125;);</span><br><span class="line">observer.observe(el);</span><br></pre></td></tr></table></figure><p>For details about the motivation and further applications you can check <a href="https://developers.google.com/web/updates/2016/10/resizeobserver" target="_blank" rel="noopener">this page</a>;</p><p>If you want to go the <code>ResizeObserver</code>-Vanilla path I recommend <a href="https://philipwalton.com/articles/responsive-components-a-solution-to-the-container-queries-problem/" target="_blank" rel="noopener">this excellent guide</a>.</p><h1 id="EQCSS"><a href="index.html#EQCSS" class="headerlink" title="EQCSS"></a>EQCSS</h1><p>The <a href="https://elementqueries.com/" target="_blank" rel="noopener">EQCSS</a> project is a draft specification and implementation of element queries in CSS.</p><p>You can easily download it and write queries as below.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">  @element textarea and (max-width: 400px) &#123;</span><br><span class="line">    :self &#123;</span><br><span class="line">      background: rgb(0, 40, 190);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  @element textarea and (max-width: 200px) &#123;</span><br><span class="line">    :self &#123;</span><br><span class="line">      background: rgb(200, 40, 190);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdnjs.cloudflare.com/ajax/libs/eqcss/1.9.2/EQCSS.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>What’s awesome about EQCSS is that it exposes a vast number of queries, so you can react to width, height, characters, children, lines, scroll, orientation. On top of that it has selectors for parent, previous and next elements and also CSS units for the element. This makes it the approach with the largest API surface from this list.</p><h1 id="CSS-Element-queries"><a href="index.html#CSS-Element-queries" class="headerlink" title="CSS Element queries"></a>CSS Element queries</h1><p><a href="https://github.com/marcj/css-element-queries" target="_blank" rel="noopener">CSS Element queries</a> is another path you can take to defined element queries in CSS. The project is qualitative and has a good traction on Github. Currently it only supports interrogations for height and width, which might be all you need.</p><p>Curiously I could not make it work for the <code>textarea</code> element so I’ve replaced it with a simple resizable <code>div</code>.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"resizable-area"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>For some reason the code is not deployed to a registry or a content delivery network, hence it needs downloading locally.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">  .resizable-area &#123;</span><br><span class="line">    height: 30px;</span><br><span class="line">    width: 150px;</span><br><span class="line">    resize: both;</span><br><span class="line">    border: 1px solid black;</span><br><span class="line">    overflow: auto;</span><br><span class="line">  &#125;</span><br><span class="line">  .resizable-area[min-width~="200px"] &#123;</span><br><span class="line">    background: rgb(200, 40, 190);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  .resizable-area[min-width~="400px"] &#123;</span><br><span class="line">    background: rgb(0, 40, 190);</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"css-element-queries/src/ResizeSensor.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"css-element-queries/src/ElementQueries.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>As a bonus, the methods of <code>ResizeSensor</code> are “public” so you may employ them in Javascript.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> el = <span class="built_in">document</span>.getElementsByClassName(<span class="string">'resizable-area'</span>)[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">new</span> ResizeSensor(el, () =&gt; &#123;</span><br><span class="line">  <span class="keyword">let</span> width = el.clientWidth;</span><br><span class="line">  el.style.background = <span class="string">`rgb(<span class="subst">$&#123;width % <span class="number">256</span>&#125;</span>, 40, 190)`</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h1 id="jQuery-resize-plugin"><a href="index.html#jQuery-resize-plugin" class="headerlink" title="jQuery resize plugin"></a>jQuery resize plugin</h1><p>Even if it has been ten years since the last commit, it’s worth mentioning the <a href="http://benalman.com/projects/jquery-resize-plugin/" target="_blank" rel="noopener">resize plugin</a> for jQuery. The implementation is the simple polling using <code>setTimeout</code> but offers you the path of going straight to a familiar API, especially if your site is already powered by jQuery.</p><p>For installation I’m just pasting a CDN link towards the main library.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>For the plugin part, it seems you’d need to download (and re-upload somewhere else) the source as using the <code>https://raw.githubusercontent.com/cowboy/jquery-resize/v1.1/jquery.ba-resize.min.js</code> with a script tag yields a <a href="https://www.chromestatus.com/feature/5629709824032768" target="_blank" rel="noopener">CORB</a> error.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'textarea'</span>).resize(<span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> el = e.target;</span><br><span class="line">  <span class="keyword">let</span> width = el.clientWidth;</span><br><span class="line">  el.style.background = <span class="string">`rgb(<span class="subst">$&#123;width % <span class="number">255</span>&#125;</span>, 40, 190)`</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h1 id="Even-more-alternatives"><a href="index.html#Even-more-alternatives" class="headerlink" title="Even more alternatives"></a>Even more alternatives</h1><p>I won’t bore you with syntax, so here are other good and more than good implementations, in no particular order:</p><ul><li><a href="https://github.com/wnr/element-resize-detector" target="_blank" rel="noopener">Element Resize Detector</a> claims to be “37x faster than related approaches”</li><li><a href="https://github.com/stowball/eqio" target="_blank" rel="noopener">eqio.js</a> is a really ingenious usage of the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API" target="_blank" rel="noopener">Intersection Observer API</a></li><li><a href="https://github.com/ZeeCoder/container-query" target="_blank" rel="noopener">Container Query</a></li><li><a href="https://github.com/ausi/cq-prolyfill" target="_blank" rel="noopener">Container Queries Prolyfill</a></li><li><a href="https://github.com/react-container-query/react-container-query" target="_blank" rel="noopener">React Container Query</a></li><li><a href="https://github.com/e2o/vue-element-query" target="_blank" rel="noopener">vue element query</a></li></ul><h1 id="Conclusion"><a href="index.html#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h1><p>Even if official support for an element’s resize is late to the part and limited, the community does not fail to provide the means. Therefore, you can use it in you project today!</p><div style="height:20px;vertical-align:middle;line-height:20px;font-size:11px;color:#666;margin:6px 0 0 0">Thumbnail image copyright © Michael Whelan.</div><div class="pagination"><a class="pag-anchor" href="../examples-from-the-long-road-of-over-engineering/index.html"><i class="fas fa-angle-left pag-anchor">&lt older</i></a> <a class="pag-anchor" href="../three-types-of-recursive-React-components/index.html"><i class="fas fa-angle-right pag-anchor">newer &gt</i></a></div></div></article><footer id="footer"><div class="footer-left">Copyright &copy; 2022 Randy Miller</div><div class="footer-right"><nav><ul><li><a href="../index.html">Home</a></li><li><a href="../about/index.html">About</a></li><li><a href="../posts.html">Writing</a></li><li><a href="https://twitter.com/randy_mllr">Twitter</a></li></ul></nav></div></footer></div><script>!function(t,e,a,c,n,o){e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},n=t.createElement("script"),o=t.getElementsByTagName("script")[0],n.async=1,n.src="//cdn.usefathom.com/tracker.js",n.id="fathom-script",o.parentNode.insertBefore(n,o)}(document,window,0,"fathom"),fathom("set","siteId","YFKINOVA"),fathom("trackPageview")</script></body></html>